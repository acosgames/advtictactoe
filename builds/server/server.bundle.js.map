{"version":3,"sources":["webpack://tictactoe/./game-server/fsg.js","webpack://tictactoe/./game-server/index.js"],"names":["this","msg","JSON","parse","stringify","globals","action","originalState","state","nextState","players","actionName","cb","finish","log","error","key","value","userid","rule","rules","fsg","on","e"],"mappings":"mBA6DA,YA5DA,MACI,cACIA,KAAKC,IAAMC,KAAKC,MAAMD,KAAKE,UAAUC,QAAQC,WAC7CN,KAAKO,cAAgBL,KAAKC,MAAMD,KAAKE,UAAUC,QAAQG,UACvDR,KAAKS,UAAYP,KAAKC,MAAMD,KAAKE,UAAUC,QAAQG,UAC7C,YAAaR,KAAKS,YACpBT,KAAKS,UAAUC,QAAU,IAIjC,GAAGC,EAAYC,GACPZ,KAAKC,IAAIK,QAAUK,GAEvBC,EAAGZ,KAAKC,KAGZ,SACII,QAAQQ,OAAOb,KAAKS,WAGxB,IAAIR,GACAI,QAAQS,IAAIb,GAEhB,MAAMA,GACFI,QAAQU,MAAMd,GAGlB,SACI,OAAOD,KAAKM,OAGhB,MAAMU,EAAKC,GAEP,YAAmB,IAARD,EACAhB,KAAKS,eACK,IAAVQ,EACAjB,KAAKS,UAAUO,QAE1BhB,KAAKS,UAAUO,GAAOC,GAG1B,QAAQC,EAAQD,GACZ,YAAsB,IAAXC,EACAlB,KAAKS,UAAUC,aACL,IAAVO,EACAjB,KAAKS,UAAUC,QAAQQ,QAElClB,KAAKS,UAAUC,QAAQQ,GAAUD,GAGrC,MAAME,EAAMF,GACR,YAAoB,IAATE,EACAnB,KAAKS,UAAUW,WACL,IAAVH,EACAjB,KAAKS,UAAUW,MAAMD,QAEhCnB,KAAKS,UAAUW,MAAMD,GAAQF,KCvDrC,IACII,EAAIC,GAAG,QAASrB,IACZoB,EAAIP,IAAI,SAAUZ,KAAKE,UAAUH,OAGrCoB,EAAIC,GAAG,QAASrB,IACZoB,EAAIP,IAAI,SAAWZ,KAAKE,UAAUH,OAGtCoB,EAAIR,SAER,MAAOU,GACHF,EAAIN,MAAMQ,K","file":"server.bundle.js","sourcesContent":["\r\nclass FSG {\r\n    constructor() {\r\n        this.msg = JSON.parse(JSON.stringify(globals.action()));\r\n        this.originalState = JSON.parse(JSON.stringify(globals.state()));\r\n        this.nextState = JSON.parse(JSON.stringify(globals.state()));\r\n        if (!('players' in this.nextState)) {\r\n            this.nextState.players = {};\r\n        }\r\n    }\r\n\r\n    on(actionName, cb) {\r\n        if (this.msg.action != actionName)\r\n            return;\r\n        cb(this.msg);\r\n    }\r\n\r\n    finish() {\r\n        globals.finish(this.nextState);\r\n    }\r\n\r\n    log(msg) {\r\n        globals.log(msg);\r\n    }\r\n    error(msg) {\r\n        globals.error(msg);\r\n    }\r\n\r\n    action() {\r\n        return this.action;\r\n    }\r\n\r\n    state(key, value) {\r\n\r\n        if (typeof key === 'undefined')\r\n            return this.nextState;\r\n        if (typeof value === 'undefined')\r\n            return this.nextState[key];\r\n\r\n        this.nextState[key] = value;\r\n    }\r\n\r\n    players(userid, value) {\r\n        if (typeof userid === 'undefined')\r\n            return this.nextState.players;\r\n        if (typeof value === 'undefined')\r\n            return this.nextState.players[userid];\r\n\r\n        this.nextState.players[userid] = value;\r\n    }\r\n\r\n    rules(rule, value) {\r\n        if (typeof rule === 'undefined')\r\n            return this.nextState.rules;\r\n        if (typeof value === 'undefined')\r\n            return this.nextState.rules[rule];\r\n\r\n        this.nextState.rules[rule] = value;\r\n    }\r\n}\r\n\r\nexport default new FSG();","import fsg from './fsg';\r\n\r\ntry {\r\n    fsg.on('join', (msg) => {\r\n        fsg.log(\"JOIN: \", JSON.stringify(msg));\r\n    });\r\n    // debugger\r\n    fsg.on('pick', (msg) => {\r\n        fsg.log(\"PICK: \" + JSON.stringify(msg));\r\n    });\r\n\r\n    fsg.finish();\r\n}\r\ncatch (e) {\r\n    fsg.error(e);\r\n}"],"sourceRoot":""}